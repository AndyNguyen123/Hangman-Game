<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hangman</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4"
        crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Just+Me+Again+Down+Here|Waiting+for+the+Sunrise" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>

<body>
    <!-- <audio id="audio" src="./sounds/soundtrack.mp3" autoplay="autoplay" loop="loop"></audio> -->
    <header>
        <h1>
            hipman
        </h1>
    </header>

    <section class="container-fluid">
        <div>
            please press any key to get started!
        </div>
        <div>
            current word
        </div>
        <div id="placeHolder"></div>

        <section id="charGuess">

            <div id="letterGuessed"></div>
        </section>

        <div id="remainGuesses"></div>
    </section>

    <script>
        const words = ["copper", "skateboard", "fanny", "kickstarter", "typewriter", "selfies", "fingerstache", "etsy"];
        const chosenWord = '';
        let guesses = [];
        let remainGuesses = 10;
        let correctWordGuessed = 0;
        const gameObject = {
            words,
            guesses,
            chosenWord,
            remainGuesses,
        };


        const pickRandomWord = (word) => { return word[Math.floor(Math.random() * word.length)]; };
        const splitToArray = (word) => { return word.split(''); };
        //choose a random word in the words array to play
        gameObject.chosenWord = pickRandomWord(gameObject.words);
        console.log('Chosen Word: ' + gameObject.chosenWord);
        //create a display holder
        gameObject.displayHolder = gameObject.chosenWord.split('').map(char => '_');
        console.log('Display Holder: ' + gameObject.displayHolder);

        document.onkeyup = () => {
            let inputChar = event.key;
            console.log('input ' + inputChar);

            //logging the letter that the player guesses
            if (guesses.indexOf(inputChar) === -1) {
                guesses.push(inputChar);
            }

            //check the player input against the chosen word then update the display holder
            for (let i = 0; i < splitToArray(gameObject.chosenWord).length; i++) {
                if (inputChar.toLowerCase() === splitToArray(gameObject.chosenWord)[i]) {
                    gameObject.displayHolder[i] = inputChar;
                }
            }

            //Decrease number of guesses if the player guessed wrong
            if (splitToArray(gameObject.chosenWord).indexOf(inputChar) === -1) {
                gameObject.remainGuesses--;
                console.log('remainguesses ' + remainGuesses);
            }

            //move to next random word
            if (gameObject.displayHolder.join('') === gameObject.chosenWord) {
                correctWordGuessed++;
                gameObject.chosenWord = pickRandomWord(gameObject.words);
                gameObject.displayHolder = gameObject.chosenWord.split('').map(char => '_');
                guesses = [];
            }

            $("#placeHolder").html(gameObject.displayHolder.join(' '));
            $("#letterGuessed").html("you've guessed: " + guesses.map(char => ' ' + char));
            console.log('Guesses array: ' + guesses);
            console.log('Display Holder ' + gameObject.displayHolder);
            $("#remainGuesses").html("remain guesses: " + gameObject.remainGuesses);
        }

        $("#letterGuessed").html("you've guessed: " + guesses.map(char => ' ' + char));
        $("#placeHolder").html(gameObject.displayHolder.join(' '));
        $("#remainGuesses").html("remain guesses: " + gameObject.remainGuesses);

    </script>
</body>

</html>